<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:PuzzleDazzle"
             x:Class="PuzzleDazzle.SettingsPage"
             Title="Settings"
             BackgroundColor="{DynamicResource PageBackgroundColor}">

    <ContentPage.Resources>
        <Style x:Key="ToggleButtonUnselected" TargetType="Button">
            <Setter Property="BackgroundColor" Value="{DynamicResource Gray200}" />
            <Setter Property="TextColor" Value="{DynamicResource Gray700}" />
            <Setter Property="FontFamily" Value="FontAwesome" />
            <Setter Property="FontSize" Value="26" />
            <Setter Property="WidthRequest" Value="80" />
            <Setter Property="HeightRequest" Value="80" />
            <Setter Property="CornerRadius" Value="16" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Margin" Value="4" />
        </Style>
        <Style x:Key="ToggleButtonSelected" TargetType="Button" BasedOn="{StaticResource ToggleButtonUnselected}">
            <Setter Property="BackgroundColor" Value="{DynamicResource Primary}" />
            <Setter Property="TextColor" Value="White" />
        </Style>

        <!-- Difficulty buttons keep stars yellow in both states -->
        <Style x:Key="DifficultyToggleButtonUnselected" TargetType="Button" BasedOn="{StaticResource ToggleButtonUnselected}">
            <Setter Property="TextColor" Value="{DynamicResource Tertiary}" />
        </Style>
        <Style x:Key="DifficultyToggleButtonSelected" TargetType="Button" BasedOn="{StaticResource ToggleButtonSelected}">
            <Setter Property="TextColor" Value="{DynamicResource Tertiary}" />
        </Style>
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="25">

            <!-- Maze Size Section -->
            <StackLayout Spacing="10">
                <Label Text="Maze Size"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="{DynamicResource Primary}" />

                <FlexLayout Wrap="Wrap"
                            Direction="Row"
                            JustifyContent="Start">
                    <Button x:Name="SizeSmallButton"
                            Text="{x:Static local:FontAwesomeIcons.ShapeSquare}"
                            Style="{StaticResource ToggleButtonUnselected}"
                            FontSize="16"
                            Clicked="OnSizeSmallClicked"
                            SemanticProperties.Hint="Small maze (10x10)" />
                    <Button x:Name="SizeMediumButton"
                            Text="{x:Static local:FontAwesomeIcons.ShapeSquare}"
                            Style="{StaticResource ToggleButtonUnselected}"
                            FontSize="26"
                            Clicked="OnSizeMediumClicked"
                            SemanticProperties.Hint="Medium maze (20x20)" />
                    <Button x:Name="SizeLargeButton"
                            Text="{x:Static local:FontAwesomeIcons.ShapeSquare}"
                            Style="{StaticResource ToggleButtonUnselected}"
                            FontSize="38"
                            Clicked="OnSizeLargeClicked"
                            SemanticProperties.Hint="Large maze (30x30)" />
                </FlexLayout>
            </StackLayout>

            <!-- Difficulty Section -->
            <StackLayout Spacing="10">
                <Label Text="Difficulty"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="{DynamicResource Primary}" />

                <FlexLayout Wrap="Wrap"
                            Direction="Row"
                            JustifyContent="Start">
                    <Button x:Name="DifficultyEasyButton"
                            Text="{x:Static local:FontAwesomeIcons.DifficultyEasy}"
                            Style="{StaticResource DifficultyToggleButtonUnselected}"
                            FontSize="20"
                            Clicked="OnDifficultyEasyClicked"
                            SemanticProperties.Hint="Easy difficulty (1 star)" />
                    <Button x:Name="DifficultyMediumButton"
                            Text="{x:Static local:FontAwesomeIcons.DifficultyMedium}"
                            Style="{StaticResource DifficultyToggleButtonUnselected}"
                            FontSize="20"
                            Clicked="OnDifficultyMediumClicked"
                            SemanticProperties.Hint="Medium difficulty (2 stars)" />
                    <Button x:Name="DifficultyHardButton"
                            Text="{x:Static local:FontAwesomeIcons.DifficultyHard}"
                            Style="{StaticResource DifficultyToggleButtonUnselected}"
                            FontSize="20"
                            Clicked="OnDifficultyHardClicked"
                            SemanticProperties.Hint="Hard difficulty (3 stars)" />
                </FlexLayout>
            </StackLayout>

            <!-- Shape Section -->
            <StackLayout Spacing="10">
                <Label Text="Maze Shape"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="{DynamicResource Primary}" />
                <Label Text="Choose different shapes for variety"
                       FontSize="13"
                       TextColor="{DynamicResource Gray500}"
                       Margin="0,-5,0,0" />

                <FlexLayout Wrap="Wrap"
                            Direction="Row"
                            JustifyContent="Start">
                    <Button x:Name="ShapeRectangleButton"
                            Text="{x:Static local:FontAwesomeIcons.ShapeSquare}"
                            Style="{StaticResource ToggleButtonUnselected}"
                            Clicked="OnShapeRectangleClicked"
                            SemanticProperties.Hint="Rectangle shape" />
                    <Button x:Name="ShapeCircleButton"
                            Text="{x:Static local:FontAwesomeIcons.ShapeCircle}"
                            Style="{StaticResource ToggleButtonUnselected}"
                            Clicked="OnShapeCircleClicked"
                            SemanticProperties.Hint="Circle shape" />
                    <Button x:Name="ShapeDiamondButton"
                            Text="{x:Static local:FontAwesomeIcons.ShapeDiamond}"
                            Style="{StaticResource ToggleButtonUnselected}"
                            Clicked="OnShapeDiamondClicked"
                            SemanticProperties.Hint="Diamond shape" />
                    <Button x:Name="ShapeHeartButton"
                            Text="{x:Static local:FontAwesomeIcons.ShapeHeart}"
                            Style="{StaticResource ToggleButtonUnselected}"
                            Clicked="OnShapeHeartClicked"
                            SemanticProperties.Hint="Heart shape" />
                </FlexLayout>
            </StackLayout>

            <!-- Upgrade to Premium -->
            <Border Stroke="{DynamicResource Tertiary}"
                    StrokeThickness="2"
                    BackgroundColor="White"
                    Padding="15">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12" />
                </Border.StrokeShape>
                <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                    <Label Text="{x:Static local:FontAwesomeIcons.Star}"
                           FontFamily="FontAwesome"
                           FontSize="24"
                           TextColor="{DynamicResource Tertiary}"
                           VerticalTextAlignment="Center" />
                    <StackLayout Grid.Column="1" Spacing="2" VerticalOptions="Center">
                        <Label Text="Upgrade to Premium"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="{DynamicResource Gray900}" />
                        <Label Text="Unlimited maze generation"
                               FontSize="13"
                               TextColor="{DynamicResource Gray500}" />
                    </StackLayout>
                    <Label Grid.Column="2"
                           Text="{x:Static local:FontAwesomeIcons.ArrowLeft}"
                           FontFamily="FontAwesome"
                           FontSize="16"
                           TextColor="{DynamicResource Gray400}"
                           VerticalTextAlignment="Center"
                           Rotation="180" />
                </Grid>
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnUpgradeClicked" />
                </Border.GestureRecognizers>
            </Border>

            <!-- Back Button -->
            <Button Text="{x:Static local:FontAwesomeIcons.ArrowLeft}"
                    FontFamily="FontAwesome"
                    FontSize="20"
                    WidthRequest="56"
                    HeightRequest="56"
                    CornerRadius="28"
                    BackgroundColor="{DynamicResource Secondary}"
                    TextColor="White"
                    Clicked="OnBackClicked"
                    HorizontalOptions="Center"
                    Margin="0,20,0,0"
                    SemanticProperties.Hint="Go back to maze generation" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
