<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:PuzzleDazzle.Controls"
             x:Class="PuzzleDazzle.GenerationPage"
             Title="Maze Generation"
             BackgroundColor="{DynamicResource PageBackgroundColor}">

    <Grid RowDefinitions="*,Auto">
        
        <!-- Main Content Area -->
        <Grid Grid.Row="0">
            
            <!-- Welcome Section (shown initially) -->
            <StackLayout x:Name="WelcomeSection"
                        IsVisible="True"
                        VerticalOptions="Center"
                        Padding="40"
                        Spacing="20">
                <Label Text="Puzzle Dazzle"
                       FontSize="36"
                       FontAttributes="Bold"
                       HorizontalTextAlignment="Center"
                       TextColor="{DynamicResource Primary}" />
                <Label Text="Press Start to generate your maze"
                       FontSize="18"
                       HorizontalTextAlignment="Center"
                       TextColor="{DynamicResource Gray600}" />
            </StackLayout>
            
            <!-- Progress Indicator (shown during generation) -->
            <StackLayout x:Name="ProgressSection"
                        IsVisible="False"
                        VerticalOptions="Center"
                        Padding="40"
                        Spacing="15">
                <Label Text="Generating your maze..."
                       FontSize="18"
                       FontAttributes="Bold"
                       HorizontalTextAlignment="Center"
                       TextColor="{DynamicResource Primary}" />
                <ActivityIndicator IsRunning="True"
                                 Color="{DynamicResource Primary}"
                                 HeightRequest="50" />
            </StackLayout>

            <!-- Maze Display Area -->
            <Border x:Name="MazeDisplayArea"
                    IsVisible="False"
                    Stroke="{DynamicResource Gray300}"
                    StrokeThickness="2"
                    BackgroundColor="White"
                    Padding="5"
                    Margin="20">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10" />
                </Border.StrokeShape>
                
                <!-- Actual maze visualization -->
                <controls:MazeView x:Name="MazeView" />
            </Border>
        </Grid>

        <!-- Bottom Toolbar -->
        <Border Grid.Row="1"
                BackgroundColor="{DynamicResource Gray100}"
                Padding="10,15">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="0" />
            </Border.StrokeShape>
            
            <Grid ColumnDefinitions="*,*,2*,*,*" ColumnSpacing="10">
                
                <!-- Settings Button -->
                <Button Grid.Column="0"
                        Text="âš™ï¸&#10;Settings"
                        FontSize="12"
                        HeightRequest="60"
                        BackgroundColor="Transparent"
                        TextColor="{DynamicResource Gray700}"
                        Clicked="OnSettingsClicked"
                        SemanticProperties.Hint="Open settings" />
                
                <!-- Save Button -->
                <Button Grid.Column="1"
                        x:Name="SaveButton"
                        Text="ðŸ’¾&#10;Save"
                        FontSize="12"
                        HeightRequest="60"
                        BackgroundColor="Transparent"
                        TextColor="{DynamicResource Gray700}"
                        Clicked="OnSaveClicked"
                        IsEnabled="False"
                        SemanticProperties.Hint="Save the generated maze" />
                
                <!-- Start Button (Centered, Primary) -->
                <Button Grid.Column="2"
                        Text="â–¶ï¸ Start"
                        FontSize="18"
                        FontAttributes="Bold"
                        HeightRequest="60"
                        CornerRadius="30"
                        BackgroundColor="{DynamicResource Primary}"
                        TextColor="White"
                        Clicked="StartMazeGeneration"
                        SemanticProperties.Hint="Generate a new maze" />
                
                <!-- Print Button -->
                <Button Grid.Column="3"
                        x:Name="PrintButton"
                        Text="ðŸ–¨ï¸&#10;Print"
                        FontSize="12"
                        HeightRequest="60"
                        BackgroundColor="Transparent"
                        TextColor="{DynamicResource Gray700}"
                        Clicked="OnPrintClicked"
                        IsEnabled="False"
                        SemanticProperties.Hint="Print the generated maze" />
                
                <!-- Spacer for balance -->
                <BoxView Grid.Column="4" IsVisible="False" />
            </Grid>
        </Border>

    </Grid>

</ContentPage>
